<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Helion Delta</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <header>
        <h1>ğŸš€ HELION DELTA</h1>
    </header>

    <div class="game-layout">

        <!-- LADO IZQUIERDO: Tablero -->
        <main class="main-content">
            <div id="board-container">
                <svg id="hex-svg" xmlns="http://www.w3.org/2000/svg"></svg>
            </div>

            <!-- Panel de movimiento -->
            <div id="move-panel" style="display:none;"></div>

            <!-- Barra de estado -->
            <div id="game-status" class="game-status"></div>

            <!-- Toolbar (Debug y utils) -->
            <div class="toolbar">
                <button id="btn-export" onclick="exportConfig()" style="display:none;">ğŸ“‹ Exportar selecciÃ³n</button>
                <button id="btn-clear" onclick="clearAll()" style="display:none;">ğŸ—‘ Limpiar selecciÃ³n</button>
                <button id="btn-debug-select" onclick="toggleDebugSelect()" style="display:none;">ğŸŒ¸ SelecciÃ³n
                    Rosa</button>
                <button id="btn-debug-card" onclick="debugGiveCard()" style="display:none;">ğŸƒ +1 Carta (Debug)</button>
                <button id="btn-debug" onclick="toggleDebugMode()">ğŸ›  Modo Debug</button>
                <button id="btn-new-game" onclick="resetGame()" style="margin-left:auto; background:#c0392b;">ğŸ”¥ Nueva
                    Partida</button>
            </div>
        </main>

        <!-- LADO DERECHO: Barra Lateral -->
        <aside class="sidebar">
            <!-- Banner de turno -->
            <div id="turn-banner">
                <span id="turn-dot" class="turn-dot"></span>
                <span id="turn-label">Turno: Jugador Rojo</span>
                <button id="btn-end-turn" onclick="endTurn()">Terminar turno âœ</button>
            </div>

            <!-- Contadores de monedas -->
            <div class="counters">
                <div class="counter counter-red">
                    <div class="counter-label">ğŸ”´ Jugador Rojo</div>
                    <div class="counter-coins">
                        <button class="coin-btn" onclick="addCoins('red', -1)" style="display:none;">âˆ’</button>
                        <span class="coin-value" id="coins-red">0</span>
                        <button class="coin-btn" onclick="addCoins('red', 1)" style="display:none;">+</button>
                    </div>
                    <!-- Mano de cartas -->
                    <div class="player-hand-label">ğŸƒ Cartas (<span id="hand-count-red">0</span>/6)</div>
                    <div class="player-hand" id="hand-red"><span class="hand-empty">Sin cartas</span></div>
                </div>

                <div class="counter counter-green">
                    <div class="counter-label">ğŸŸ¢ Jugador Verde</div>
                    <div class="counter-coins">
                        <button class="coin-btn" onclick="addCoins('green', -1)" style="display:none;">âˆ’</button>
                        <span class="coin-value" id="coins-green">0</span>
                        <button class="coin-btn" onclick="addCoins('green', 1)" style="display:none;">+</button>
                    </div>
                    <!-- Mano de cartas -->
                    <div class="player-hand-label">ğŸƒ Cartas (<span id="hand-count-green">0</span>/6)</div>
                    <div class="player-hand" id="hand-green"><span class="hand-empty">Sin cartas</span></div>
                </div>
            </div>

            <!-- BotÃ³n para abrir Modal de Tienda -->
            <button id="btn-open-shop" class="card-buy-btn"
                style="width: 100%; padding: 15px; font-size: 1.2rem; margin-top: 10px;" onclick="openShopModal()">ğŸ›’
                ABRIR TIENDA</button>
        </aside>

    </div>

    <!-- Modal Global de Tienda -->
    <div id="global-shop-modal" class="modal-backdrop" style="display:none; z-index:9000;">
        <div class="modal-content shop-modal-content" style="max-width: 800px; width: 90%; position: relative;">
            <button class="close-modal-btn" onclick="closeShopModal()">âœ–</button>
            <h2 class="battle-title" style="margin-bottom: 20px;">ğŸ›’ Tienda GalÃ¡ctica</h2>
            <div class="shop-modal-grid">
                <!-- Tienda de naves -->
                <div id="ship-shop-panel">
                    <div class="shop-title">ğŸš€ Comprar nave</div>
                    <div id="ship-shop" class="ship-shop-grid"></div>
                </div>

                <!-- Tienda de cartas -->
                <div id="card-shop-panel">
                    <div class="shop-title">ğŸ‚  Cartas de habilidad</div>
                    <button id="btn-buy-card" class="card-buy-btn" onclick="buyCard()">ğŸ‚  Comprar carta â€” 3ğŸ’°</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal de exportaciÃ³n -->
    <div id="export-modal" class="modal-backdrop" onclick="closeModal(event)">
        <div class="modal-box">
            <h2>ğŸ“‹ Casillas seleccionadas</h2>
            <p>Array de casillas actualmente en rosa:</p>
            <textarea id="export-output" readonly></textarea>
            <div class="modal-actions">
                <button id="btn-copy" onclick="copyOutput()">Copiar</button>
                <button onclick="document.getElementById('export-modal').classList.remove('open')">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Carta -->
    <div id="card-modal" class="modal-backdrop" style="display:none; z-index:9500;">
        <div class="modal-content card-modal-content">
            <h2 id="cm-title" class="battle-title" style="margin-bottom:10px;">Nombre</h2>
            <div id="cm-desc" style="color:#bdc3c7; font-size:1.1rem; margin-bottom:20px; line-height:1.4;">Desc</div>
            <div class="move-count-row" style="gap:10px;">
                <button id="cm-btn-play" class="ship-buy-btn" style="background:#3498db; flex:1;">ğŸ® Jugar</button>
                <button id="cm-btn-sell" class="ship-buy-btn" style="background:#f1c40f; color:#333; flex:1;">ğŸ’¸
                    Vender</button>
            </div>
            <button class="move-cancel-btn" style="margin-top:15px; width:100%;"
                onclick="closeCardModal()">Cerrar</button>
        </div>
    </div>

    <!-- Modal de Movimiento -->
    <div id="move-modal" class="modal-backdrop" style="display:none; z-index:9000;"></div>

    <!-- Modal de Batalla -->

    <div id="battle-modal" class="modal-backdrop" style="display:none; z-index:10000;">
        <div class="modal-content battle-content">
            <h2 class="battle-title">âš”ï¸ Â¡BATALLA! âš”ï¸</h2>
            <div class="battle-arena">
                <div class="battle-side side-attacker">
                    <div class="battle-side-title">ATACANTE</div>
                    <div id="battle-atk-str" class="battle-stat">Fuerza: 0</div>
                    <div id="battle-atk-dice" class="battle-dice fa-spin">ğŸ²</div>
                    <div id="battle-atk-total" class="battle-total">Total: 0</div>
                    <div id="battle-atk-cards" class="battle-cards-container"></div>
                </div>
                <div class="battle-vs">VS</div>
                <div class="battle-side side-defender">
                    <div class="battle-side-title">DEFENSOR</div>
                    <div id="battle-def-str" class="battle-stat">Fuerza: 0</div>
                    <div id="battle-def-dice" class="battle-dice fa-spin">ğŸ²</div>
                    <div id="battle-def-total" class="battle-total">Total: 0</div>
                    <div id="battle-def-cards" class="battle-cards-container"></div>
                </div>
            </div>
            <div id="battle-result" class="battle-result"></div>
            <button id="btn-roll-dice" class="modal-btn btn-confirm" onclick="rollBattleDice()">ğŸ² TIRAR DADOS</button>
            <button id="btn-close-battle" class="modal-btn btn-cancel" onclick="closeBattleModal()"
                style="display:none;">Cerrar</button>
        </div>
    </div>

    <!-- Modal de Espionaje -->
    <div id="espionage-modal" class="modal-backdrop" style="display:none; z-index:10000;">
        <div class="modal-content battle-content" style="max-width: 600px;">
            <h2 class="battle-title" style="color: #9b59b6;">ğŸ‘ï¸ INFILTRACIÃ“N ğŸ‘ï¸</h2>
            <p style="text-align: center; color: #ecf0f1; margin-bottom: 20px;">Inteligencia obtenida sobre la mano del
                enemigo:</p>
            <div id="espionage-cards" class="battle-cards-container" style="justify-content: center; flex-wrap: wrap;">
            </div>
            <button class="modal-btn btn-cancel"
                onclick="document.getElementById('espionage-modal').style.display = 'none'"
                style="margin-top: 20px; width: 100%;">Cerrar Inteligencia</button>
        </div>
    </div>

    <!-- Modal de Robo de Nave -->
    <div id="steal-modal" class="modal-backdrop" style="display:none; z-index:11000;">
        <div class="modal-content battle-content">
            <h2 class="battle-title" style="color: #f39c12;">ğŸ§² BOTÃN DE GUERRA ğŸ§²</h2>
            <p style="text-align: center; color: #ecf0f1; margin-bottom: 20px;">Selecciona una nave enemiga destruida
                para asimilarla a tu flota:</p>
            <div id="steal-ships-container"
                style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-bottom: 25px;"></div>
            <button class="modal-btn btn-cancel" onclick="cancelStealShip()" style="width: 100%;">No asimilar botÃ­n
                (Cerrar)</button>
        </div>
    </div>

    <!-- Tooltip de naves -->
    <div id="ship-tooltip" class="ship-tooltip" style="display:none;"></div>

    <script src="board.js"></script>

    <script src="cards.js"></script>

    <script src="game.js"></script>
    <script>
        // Inicializar el juego tras cargar ambos scripts
        initGame();
    </script>
</body>

</html>